<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rise of the KMS - Animation</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <style>
        body { margin: 0; background: #000; overflow: hidden; font-family: 'Arial', sans-serif; }
        #screen { width: 100vw; height: 100vh; position: relative; display: flex; flex-direction: column; align-items: center; justify-content: center; background: linear-gradient(#1e3c72, #2a5298); }
        
        /* Characters */
        .character { position: absolute; bottom: -100px; width: 200px; height: 300px; display: flex; flex-direction: column; align-items: center; opacity: 0; }
        .char-body { width: 100px; height: 150px; border-radius: 20px; background: #ffcc33; border: 4px solid #fff; position: relative; }
        .char-name { color: white; background: rgba(0,0,0,0.5); padding: 5px 10px; border-radius: 5px; margin-top: 10px; font-weight: bold; }
        
        /* Narrator/Dialogue Box */
        #ui-box { position: absolute; bottom: 30px; width: 80%; background: rgba(255, 255, 255, 0.9); padding: 20px; border-radius: 15px; border: 5px solid #005a9c; min-height: 80px; box-shadow: 0 0 20px rgba(0,0,0,0.5); }
        #text-content { font-size: 20px; color: #333; line-height: 1.4; }
        #title-card { position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); color: gold; font-size: 60px; text-shadow: 4px 4px #000; text-align: center; opacity: 0; }

        #start-btn { padding: 20px 40px; font-size: 24px; cursor: pointer; background: gold; border: none; border-radius: 10px; font-weight: bold; z-index: 100; }
    </style>
</head>
<body>

<div id="screen">
    <button id="start-btn">ðŸŽ¬ START ANIMATION</button>
    
    <div id="title-card">RISE OF THE KMS</div>

    <div id="jayden" class="character"><div class="char-body" style="background: #4a90e2;"></div><div class="char-name">Jayden</div></div>
    <div id="kms-squad" class="character"><div class="char-body" style="background: #f5a623;"></div><div class="char-name">KMS Squad</div></div>
    <div id="rivals" class="character"><div class="char-body" style="background: #d0021b;"></div><div class="char-name">Rivals</div></div>

    <div id="ui-box" style="display: none;">
        <div id="text-content"></div>
    </div>
</div>

<script>
    const textElement = document.getElementById('text-content');
    const startBtn = document.getElementById('start-btn');

    const scenes = [
        { text: "In the heart of Accra, there stood a group of young dreamersâ€¦ brave, bold, and full of purpose.", action: "title" },
        { text: "They were more than friends â€” they were the Kingsridge Motivational Squadâ€¦ KMS.", action: "show_kms" },
        { text: "A quiet student named Jayden struggles with self-confidence at Kingsridge School.", action: "show_jayden" },
        { text: "He feels invisible until Kwame, Afia, Malik, and Sena reach out to him.", action: "kms_joins" },
        { text: "They introduce him to KMS â€” a group that inspires, motivates, and lifts others up.", action: "talk" },
        { text: "Their motto: 'One voice, one goal â€” to lift others as we rise.'", action: "talk" },
        { text: "But then... a rival group begins mocking them, calling them 'too soft'.", action: "rivals" },
        { text: "Jayden wants to quit... but his teacher says: 'Leaders are not always loud. They are consistent.'", action: "teacher" },
        { text: "KMS decides to host the biggest event of the term â€” 'Day of Change.'", action: "finale" }
    ];

    function speak(text, callback) {
        const msg = new SpeechSynthesisUtterance(text);
        msg.rate = 0.9;
        msg.pitch = 1;
        msg.onend = callback;
        window.speechSynthesis.speak(msg);
    }

    async function playScene(index) {
        if (index >= scenes.length) {
            textElement.innerText = "The Story Continues...";
            return;
        }

        const scene = scenes[index];
        textElement.innerText = scene.text;

        // Animation Logic
        if (scene.action === "title") {
            gsap.to("#title-card", { opacity: 1, duration: 1, yoyo: true, repeat: 1 });
        } else if (scene.action === "show_jayden") {
            gsap.to("#jayden", { opacity: 1, bottom: "150px", duration: 1 });
        } else if (scene.action === "kms_joins") {
            gsap.to("#kms-squad", { opacity: 1, bottom: "150px", left: "20%", duration: 1 });
            gsap.to("#jayden", { left: "60%", duration: 1 });
        } else if (scene.action === "rivals") {
            gsap.to("#rivals", { opacity: 1, bottom: "150px", left: "40%", duration: 0.5 });
            gsap.to("#screen", { background: "#330000", duration: 0.5 });
        } else if (scene.action === "finale") {
            gsap.to(".character", { scale: 1.2, duration: 1 });
            gsap.to("#screen", { background: "linear-gradient(#f8ff00, #f15031)", duration: 1 });
        }

        speak(scene.text, () => {
            setTimeout(() => playScene(index + 1), 1000);
        });
    }

    startBtn.addEventListener('click', () => {
        startBtn.style.display = 'none';
        document.getElementById('ui-box').style.display = 'block';
        playScene(0);
    });
</script>

</body>
</html>
